<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke Taylor - Games Programmer Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Roboto+Mono:wght@400;700&display=swap');

        /* --- Color Variables --- */
        :root {
            --color-bg: #1D1D1D;      /* Deep Charcoal */
            --color-text: #F0EAD6;    /* Warm White */
            --color-accent: #6E8898;  /* Steel Blue */

            /* Scrollbar Colors */
            --scrollbar-thumb: #6E8898;
            --scrollbar-track: #131313;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            height: 100vh;
            overflow: hidden; /* Crucial for fixed console design (Vertical is handled by main tag, horizontal is hidden) */
            overflow-x: hidden; /* Global fix for horizontal bleed */
        }

        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }

        /* --- UI Styles --- */
        
        .console-panel {
            background-color: var(--color-bg)99; /* 60% opacity */
            backdrop-filter: blur(12px);
            border: 1px solid var(--color-accent)80; /* 50% opacity */
        }
        
        .command-button {
            border: 1px solid var(--color-accent)80;
            color: var(--color-accent);
            transition: all 0.3s;
        }

        .command-button:hover {
            box-shadow: 0 0 15px var(--color-accent)80;
            color: var(--color-text);
        }

        .nav-link {
            transition: all 0.3s;
            color: var(--color-accent);
        }

        .nav-link.active {
            background-color: var(--color-bg);
            color: var(--color-text);
            border: 1px solid var(--color-accent);
            box-shadow: 0 0 10px var(--color-accent);
        }

        .nav-link:hover {
            color: var(--color-text);
            background-color: var(--color-bg)b0;
        }

        /* --- Custom Scrollbar Styling for WebKit (Chrome, Edge) --- */
        main::-webkit-scrollbar,
        #modal-container::-webkit-scrollbar {
            width: 8px;
        }
        main::-webkit-scrollbar-thumb,
        #modal-container::-webkit-scrollbar-thumb {
            background-color: var(--scrollbar-thumb);
            border-radius: 4px;
        }
        main::-webkit-scrollbar-track,
        #modal-container::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
        }

        /* --- Custom Scrollbar Styling for Firefox --- */
        main {
            scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
            scrollbar-width: thin;
        }
        #modal-container {
            scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
            scrollbar-width: thin;
        }
    </style>
</head>
<body class="flex flex-col md:flex-row h-screen">

    <!-- --- CIRCUIT STREAM BACKGROUND LAYERS (REMOVED) --- -->

    <!-- MAIN APP CONTAINER -->
    <!-- FIX: Ensure the entire app container allows flex items to shrink -->
    <div id="app" class="relative z-10 flex flex-col md:flex-row h-full w-full min-w-0">

        <!-- 1. Mobile Header (JS will control its visibility/menu) -->
        <header id="mobile-header" class="md:hidden w-full console-panel sticky top-0 z-40">
            <div class="flex justify-between items-center p-4">
                <div class="font-extrabold tracking-wider">
                    <span class="block text-xl leading-none text-[var(--color-text)]">Luke Taylor</span>
                    <span id="mobile-current-page" class="block text-sm leading-tight text-[var(--color-accent)]">System Init</span>
                </div>
                <button id="mobile-menu-btn" class="p-2 rounded-md border border-[var(--color-accent)] text-[var(--color-accent)] transition-colors">
                    <!-- Hamburger Icon -->
                    <svg id="menu-icon" class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                </button>
            </div>
            <nav id="mobile-nav" class="flex-col space-y-2 p-4 border-t border-[var(--color-accent)]/30 hidden"></nav>
        </header>

        <!-- 2. Navigation Rail (Desktop Only) -->
        <nav id="desktop-nav" class="hidden md:flex flex-col w-48 xl:w-64 h-full console-panel border-r shadow-xl">
            <div class="font-extrabold mb-12 tracking-wider p-6">
                <span class="block text-4xl leading-none text-[var(--color-text)]">Luke</span>
                <span class="block text-2xl leading-tight text-[var(--color-accent)]">Taylor</span>
            </div>
            <div id="desktop-nav-links" class="flex flex-col space-y-4 font-mono p-6 pt-0">
                <!-- Links injected by JS -->
            </div>
            <div class="mt-auto pt-6 border-t border-[var(--color-accent)]/50 p-6">
                <p id="desktop-status" class="text-xs text-[var(--color-accent)] font-mono">STATUS: HERO ACTIVE</p>
            </div>
        </nav>

        <!-- 3. Main Content Area -->
        <!-- overflow-y-auto ensures scrolling ONLY happens when content exceeds viewport -->
        <!-- FIX: Removed padding from main so inner content is responsible for its own padding -->
        <main id="main-content-area" class="flex-1 relative overflow-y-auto min-w-0">
            <!-- FIX: Added min-w-0 to prevent flex overflow -->
            <!-- PADDING IS NOW HERE: p-8 md:p-12 -->
            <div id="content-display" class="h-full rounded-xl console-panel shadow-2xl shadow-black/50 p-8 md:p-12 transition-all duration-500">
                <!-- Content injected by JS -->
            </div>
        </main>
    </div>

    <!-- Modal Container -->
    <div id="modal-container" class="hidden fixed inset-0 z-50 bg-black/90 backdrop-blur-md items-center justify-center p-4 overflow-y-auto">
        <!-- Modal injected by JS -->
    </div>


    <!-- --- JAVASCRIPT LOGIC --- -->
    <script>
        // FIX 1: User icon updated to a path that prevents clipping within the 24x24 viewBox.
        const NAV_MAP = {
            hero: { title: 'System Init', icon: 'M12 2v2M12 20v2M20 12h2M2 12h2M2 3h20v14H2V3zm6 18h8m-4 0v-4' /* Monitor */ },
            projects: { title: 'Projects', icon: 'M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12 6.5 2 12 2zM12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zM12 8c2.2 0 4 1.8 4 4s-1.8 4-4 4-4-1.8-4-4 1.8-4 4-4z' /* Target */ },
            about: { title: 'About Me', icon: 'M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 7m-4 4a4 4 0 1 0 8 0a4 4 0 1 0 -8 0' /* User - NEW, corrected path */ },
            contact: { title: 'Contact', icon: 'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z' /* MessageSquare */ },
        };

        const PROJECTS_DATA = [
            { id: 1, title: 'Procedural World Generator', tech: ['C++', 'Unreal Engine 5', 'Perlin Noise'], description: 'A custom UE5 plugin for infinite, terrain generation using procedural noise functions and real-time LOD systems.', image: 'https://placehold.co/800x450/1D1D1D/6E8898?text=Procedural+Map+Gen', github: '#', demo: '#' },
            { id: 2, title: 'ECS Combat System', tech: ['C#', 'Unity', 'DOTS/Burst', 'Job System'], description: 'A high-performance Entity Component System (ECS) implementation for deterministic, large-scale combat simulation in Unity.', image: 'https://placehold.co/800x450/1D1D1D/F0EAD6?text=ECS+Combat+Demo', github: '#', demo: '#' },
            { id: 3, title: 'Advanced AI Behaviour Tree', tech: ['C++', 'Unreal Engine', 'Behavior Trees', 'BT++', 'State Machine'], description: 'Designed and implemented an extensible Behavior Tree framework for complex, emergent enemy AI behaviors in a tactical shooter prototype.', image: 'https://placehold.co/800x450/1D1D1D/6E8898?text=Tactical+AI', github: '#', demo: '#' },
        ];

        let currentPage = 'hero';

        // Utility to generate SVG icon markup
        function getIconSVG(dPath, classes = "w-5 h-5") {
            const pathData = dPath.includes('M') ? dPath : `M${dPath}`;
            // Use <path> for most icons, <polygon> for the play button in the modal (if needed)
            return `<svg class="${classes}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="${pathData}"/></svg>`;
        }

        // --- View Renderers ---

        function renderHeroView() {
            return `
                <div class="h-full flex flex-col justify-center text-center">
                    <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight text-[var(--color-text)] mb-4 md:mb-6">
                        <span class="text-[var(--color-accent)]">System</span> Initialized.
                    </h1>
                    <h2 class="text-xl md:text-3xl text-[var(--color-accent)] font-mono mb-6 max-w-4xl mx-auto">
                        Accessing <span class="text-[var(--color-text)]">Luke Taylor's</span> Games Programmer Profile.
                    </h2>

                    <p class="text-base md:text-lg text-[var(--color-accent)] max-w-2xl mx-auto mb-10">
                        I specialize in <b>high-performance engine systems</b>, <b>complex AI</b>, and <b>gameplay architecture</b> using C++ and C# in Unreal and Unity. My focus is building robust, scalable foundations for AAA-quality experiences.
                    </p>

                    <div class="flex flex-col md:flex-row justify-center space-y-4 md:space-y-0 md:space-x-6">
                        <button class="command-button px-6 py-2 text-base md:text-lg rounded-md" onclick="navigateTo('projects')">
                            VIEW PROJECTS
                        </button>
                        <button class="command-button px-6 py-2 text-base md:text-lg rounded-md" onclick="navigateTo('about')">
                            ABOUT ME
                        </button>
                    </div>
                    
                    <div class="mt-12 md:mt-16 text-left border-t border-[var(--color-accent)]/50 pt-6 md:pt-8">
                        <p class="text-xs md:text-sm text-[var(--color-accent)] font-mono">
                            System Status &gt; Ready for command input.
                        </p>
                        <p class="text-xs md:text-sm text-[var(--color-text)] font-mono">
                            Core Modules &gt; C++, Unreal, AI, Optimization.
                        </p>
                        <p class="text-xs md:text-sm text-[var(--color-accent)] font-mono">
                            Task &gt; Awaiting next command.
                        </p>
                    </div>
                </div>
            `;
        }

        function renderProjectsView() {
            const projectCards = PROJECTS_DATA.map(project => `
                <!-- Project Card: Outer Console Panel with Hover Effect -->
                <!-- ADDED border-2 and ACCENT border color -->
                <div class="group cursor-pointer overflow-hidden rounded-xl border-2 border-[var(--color-accent)]/30 transition-all duration-300 hover:shadow-[0_0_20px_var(--color-accent)30]" onclick="openProjectModal(${project.id})">
                    
                    <!-- 1. Thumbnail/Image Section -->
                    <div class="aspect-video overflow-hidden border-b border-[var(--color-accent)]/50 bg-[var(--color-bg)]/80">
                        <img src="${project.image}" alt="${project.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/800x450/1D1D1D/6E8898?text=Project+Thumbnail';">
                    </div>
                    
                    <!-- 2. Title & Tech Stack Section (Internal Block) -->
                    <!-- ADDED contrasting background -->
                    <div class="p-4 border-b border-[var(--color-accent)]/50 bg-[var(--color-bg)]/60">
                        <h4 class="text-lg md:text-xl font-bold text-[var(--color-accent)] mb-2">${project.title}</h4>
                        <div class="flex flex-wrap gap-2">
                            ${project.tech.map(tech => `<span class="text-xs font-mono px-2 py-0.5 bg-[var(--color-accent)]/50 text-[var(--color-text)] rounded border border-[var(--color-accent)]/70">${tech}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 3. Description Section (Bottom Block) -->
                    <!-- ADDED slightly different background for definition -->
                    <div class="p-4 bg-[var(--color-bg)]/80">
                        <p class="text-[var(--color-text)] text-sm line-clamp-2">${project.description}</p>
                    </div>

                </div>
            `).join('');

            return `
                <!-- FIX: Added overflow-x-hidden here to contain the grid width -->
                <div class="h-full overflow-y-auto overflow-x-hidden min-w-0">
                    <h3 class="text-3xl md:text-4xl font-bold text-[var(--color-accent)] mb-8 md:mb-10 border-b border-[var(--color-accent)]/50 pb-4">
                        Project Showcase
                    </h3>
                    <!-- FIX: Set inner container to w-full and used responsive padding/gap -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 w-full pr-2">
                        <!-- ADDED pr-2 (padding-right: 0.5rem) to create space for the vertical scrollbar without content overlap -->
                        ${projectCards}
                    </div>
                </div>
            `;
        }

        function renderAboutMeView() {
            return `
                <div class="h-full overflow-y-auto">
                    <h3 class="text-3xl md:text-4xl font-bold text-[var(--color-accent)] mb-8 md:mb-10 border-b border-[var(--color-accent)]/50 pb-4">
                        About Me & Journey
                    </h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10">
                        <div class="text-base text-[var(--color-text)] space-y-4 md:space-y-6">
                            <p>
                                My name is Luke Taylor, and my journey into programming began with a passion for <b>complex systems and emergent behavior</b>. What started with custom Quake 3 mods evolved into a professional focus on AAA game engine architecture.
                            </p>
                            <p>
                                I specialize in the core engine logic that drives modern gamesâ€”from developing high-performance <b>data-oriented (DOTS) architectures</b> to creating sophisticated, believable <b>NPC AI</b>. My primary tools are C++ and C#, leveraging the full power of Unreal and Unity to build systems that are robust, scalable, and highly optimized.
                            </p>
                        </div>

                        <div class="p-5 md:p-6 rounded-xl console-panel">
                            <h4 class="text-xl font-bold text-[var(--color-accent)] mb-4 flex items-center">
                                ${getIconSVG('M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 7m-4 4a4 4 0 1 0 8 0a4 4 0 1 0 -8 0', 'w-5 h-5 mr-2')} Key Milestones (Decrypted)
                            </h4>
                            <ul class="text-[var(--color-text)] font-mono text-sm space-y-3">
                                <li class="border-l-2 border-[var(--color-accent)] pl-4"><b>2012:</b> Discovered C++. First engine mod completed.</li>
                                <li class="border-l-2 border-[var(--color-accent)] pl-4"><b>2017:</b> Graduated with B.Sc. in Computer Science. Specialized in Real-Time Rendering.</li>
                                <li class="border-l-2 border-[var(--color-accent)] pl-4"><b>2019-2023:</b> Lead Systems Engineer at [Mock Studio Name]. Shipped two AAA titles.</li>
                                <li class="border-l-2 border-[var(--color-accent)] pl-4"><b>2024:</b> Focus shifted to R&D in distributed gameplay architectures.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderContactView() {
             // Form submission is handled by JS for simplicity and to avoid page reload
            return `
                <!-- FIX: Added overflow-x-hidden here to contain inner elements -->
                <div class="h-full overflow-y-auto overflow-x-hidden">
                    <h3 class="text-3xl md:text-4xl font-bold text-[var(--color-accent)] mb-8 md:mb-10 border-b border-[var(--color-accent)]/50 pb-4">
                        Initiate Contact Protocol
                    </h3>
                    
                    <div class="max-w-3xl mx-auto">
                        <div class="console-panel p-6 md:p-8 rounded-2xl shadow-xl"> 
                            <form id="contact-form" onsubmit="event.preventDefault(); handleFormSubmit(this);" class="grid grid-cols-1 md:grid-cols-2 gap-x-6">
                                <div class="mb-4 md:mb-6">
                                    <label for="name" class="block text-sm font-medium text-[var(--color-accent)] mb-1 font-mono">Name (IDENTITY)</label>
                                    <input type="text" id="name" name="name" required class="w-full p-2.5 md:p-3 rounded-lg bg-[var(--color-bg)]/70 border border-[var(--color-accent)]/70 text-[var(--color-text)] placeholder-[var(--color-accent)] font-mono focus:ring-2 focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)] transition-all duration-300 backdrop-blur-sm">
                                </div>
                                <div class="mb-4 md:mb-6">
                                    <label for="email" class="block text-sm font-medium text-[var(--color-accent)] mb-1 font-mono">Email (REPLY_CHANNEL)</label>
                                    <input type="email" id="email" name="email" required class="w-full p-2.5 md:p-3 rounded-lg bg-[var(--color-bg)]/70 border border-[var(--color-accent)]/70 text-[var(--color-text)] placeholder-[var(--color-accent)] font-mono focus:ring-2 focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)] transition-all duration-300 backdrop-blur-sm">
                                </div>
                                <div class="md:col-span-2">
                                    <div class="mb-6 md:mb-8">
                                        <label for="message" class="block text-sm font-medium text-[var(--color-accent)] mb-1 font-mono">Message (DATA_PAYLOAD)</label>
                                        <textarea id="message" name="message" rows="4" required class="w-full p-2.5 md:p-3 rounded-lg bg-[var(--color-bg)]/70 border border-[var(--color-accent)]/70 text-[var(--color-text)] placeholder-[var(--color-accent)] font-mono focus:ring-2 focus:ring-[var(--color-accent)] focus:border-[var(--color-accent)] transition-all duration-300 backdrop-blur-sm"></textarea>
                                    </div>
                                </div>
                                <div class="md:col-span-2 flex flex-col md:flex-row justify-between items-center">
                                    <button type="submit" class="command-button px-6 py-2 w-full md:w-auto mb-4 md:mb-0">
                                        ${getIconSVG('M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z', 'w-5 h-5 mr-2 inline-block')} SEND PACKET
                                    </button>
                                    <p id="form-status" class="text-base text-[var(--color-accent)] font-mono ml-0 md:ml-4"></p>
                                </div>
                            </form>
                        </div>

                        <div class="flex justify-center gap-4 md:gap-6 mt-10 md:mt-12">
                            <a href="#" target="_blank" class="p-3 rounded-full bg-[var(--color-bg)]/70 border border-[var(--color-accent)]/70 text-[var(--color-accent)] shadow-md transition-all duration-300 hover:shadow-[0_0_25px_var(--color-accent)50] hover:text-[var(--color-text)] backdrop-blur-sm" aria-label="GitHub">
                                ${getIconSVG('M15 22V18a4 4 0 0 0-1-3.75c2.9-1.25 2.9-4.2 2.9-4.2a3 3 0 0 1-.7-2c.3-.9 0-2.3 0-2.3-1.1-.3-2.4 1.5-2.9 2-1 0-2 0-3 0-1-1.5-1.8-2.3-2.9-2-.7 0-.7 1.4 0 2.3-.3.9-.7 2 0 2.3 0 0-.1 2.9 2.9 4.2a4 4 0 0 0-1 3.75v4M12 2C6.5 2 2 6.5 2 12c0 4.4 2.8 8.1 6.8 9.4 0.5 0.1 0.7-0.2 0.7-0.5 0-0.2 0-1 0-1.8-2.6 0.6-3.7-1.2-3.7-1.2-0.5-1.2-1.2-1.6-1.2-1.6-1-0.7 0-0.7 0-0.7 1.1 0 1.7 1.1 1.7 1.1 1 1.7 2.5 1.2 3.1 1 0.1-0.7 0.4-1.2 0.7-1.4-2.4-0.3-4.9-1.2-4.9-4.9 0-1.2 0.4-2.3 1-3.2-0.1-0.3-0.4-1.5 0.1-3.2 0 0 0.9-0.3 3 1.2 0.9-0.3 1.9-0.5 2.8-0.5 1 0 2 0.2 2.8 0.5 2.1-1.5 3-1.2 3-1.2 0.5 1.7 0.2 2.9 0.1 3.2 0.7 0.9 1 2 1 3.2 0 3.7-2.5 4.6-4.9 4.9 0.4 0.3 0.7 1 0.7 1.8 0 1.2 0 2.4 0 2.7 0 0.2 0.1 0.5 0.7 0.4C19.2 20.1 22 16.4 22 12 22 6.5 17.5 2 12 2z')}
                            </a>
                            <a href="#" target="_blank" class="p-3 rounded-full bg-[var(--color-bg)]/70 border border-[var(--color-accent)]/70 text-[var(--color-accent)] shadow-md transition-all duration-300 hover:shadow-[0_0_25px_var(--color-accent)50] hover:text-[var(--color-text)] backdrop-blur-sm" aria-label="LinkedIn">
                                ${getIconSVG('M16 8a6 6 0 0 0-6 6v7H6V8h4v1.5a6 6 0 0 0 6-6zM6 4.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM4 8h4v13H4z')}
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // --- Core Navigation and Display Logic ---

        function updateContent() {
            const display = document.getElementById('content-display');
            let contentHTML = '';

            // Use the switch statement to select the correct rendering function
            switch (currentPage) {
                case 'hero':
                    contentHTML = renderHeroView();
                    break;
                case 'projects':
                    contentHTML = renderProjectsView();
                    break;
                case 'about':
                    contentHTML = renderAboutMeView();
                    break;
                case 'contact':
                    contentHTML = renderContactView();
                    break;
                default:
                    contentHTML = renderHeroView();
            }

            // Simple transition effect (Framer Motion equivalent)
            display.style.opacity = '0';
            display.style.transform = 'translateY(20px)';
            
            setTimeout(() => {
                display.innerHTML = contentHTML;
                display.style.opacity = '1';
                display.style.transform = 'translateY(0)';
                updateNavigationUI();
                
                // Close mobile menu after navigation
                if (window.innerWidth < 768) { 
                    closeMobileMenu(); 
                }
            }, 300); // Wait for fade-out transition
        }

        function navigateTo(pageId) {
            if (pageId !== currentPage) {
                currentPage = pageId;
                updateContent();
            }
        }

        function updateNavigationUI() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === currentPage) {
                    link.classList.add('active');
                }
            });
            document.getElementById('desktop-status').textContent = `STATUS: ${currentPage.toUpperCase()} ACTIVE`;
            document.getElementById('mobile-current-page').textContent = NAV_MAP[currentPage].title;
        }
        
        // --- Modal Logic ---
        window.openProjectModal = function(id) {
            const project = PROJECTS_DATA.find(p => p.id === id);
            if (!project) return;
            
            const modalContainer = document.getElementById('modal-container');
            modalContainer.classList.remove('hidden');
            modalContainer.classList.add('flex');
            
            const modalContent = document.createElement('div');
            modalContent.className = `w-full max-w-2xl lg:max-w-4xl bg-[var(--color-bg)]/95 rounded-2xl border border-[var(--color-accent)]/50 shadow-xl my-8 md:my-16 relative`;
            // Modal closing handled by click on container or close button

            modalContent.innerHTML = `
                <button onclick="closeProjectModal()" class="absolute top-4 right-4 text-[var(--color-accent)] hover:text-[var(--color-text)] transition-colors p-2 rounded-full bg-[var(--color-bg)]/80 hover:shadow-[0_0_10px_var(--color-accent)50]" aria-label="Close Project Details">
                    ${getIconSVG('M18 6L6 18M6 6l12 12', 'w-6 h-6')}
                </button>

                <div class="aspect-video overflow-hidden rounded-t-2xl border-b border-[var(--color-accent)]/50">
                    <img src="${project.image}" alt="${project.title}" class="w-full object-cover" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/800x450/1D1D1D/6E8898?text=Project+Thumbnail';">
                </div>

                <div class="p-6 md:p-8">
                    <h2 class="text-3xl md:text-4xl font-extrabold text-[var(--color-accent)] mb-3 md:mb-4">${project.title}</h2>
                    <p class="text-[var(--color-text)] text-base md:text-lg mb-4 md:mb-6">${project.description} This is a more detailed summary of the project. It would include specific technical challenges, solutions, and accomplishments. (Full text placeholder)</p>

                    <div class="mb-6 md:mb-8">
                        <h4 class="text-xl font-bold text-[var(--color-accent)] mb-2 md:mb-3">Tech Stack (SYSTEM_DEPENDENCIES)</h4>
                        <div class="flex flex-wrap gap-2 md:gap-3">
                            ${project.tech.map(tech => `<span class="text-xs font-mono px-3 py-1 bg-[var(--color-accent)]/50 text-[var(--color-text)] rounded-full border border-[var(--color-accent)]/70">${tech}</span>`).join('')}
                        </div>
                    </div>

                    <div class="flex flex-col md:flex-row gap-3 md:gap-4">
                        <button onclick="window.open('${project.github}', '_blank')" class="command-button px-6 py-2 flex items-center text-sm md:text-base">
                            ${getIconSVG('M15 22V18a4 4 0 0 0-1-3.75c2.9-1.25 2.9-4.2 2.9-4.2a3 3 0 0 1-.7-2c.3-.9 0-2.3 0-2.3-1.1-.3-2.4 1.5-2.9 2-1 0-2 0-3 0-1-1.5-1.8-2.3-2.9-2-.7 0-.7 1.4 0 2.3-.3.9-.7 2 0 2.3 0 0-.1 2.9 2.9 4.2a4 4 0 0 0-1 3.75v4M12 2C6.5 2 2 6.5 2 12c0 4.4 2.8 8.1 6.8 9.4 0.5 0.1 0.7-0.2 0.7-0.5 0-0.2 0-1 0-1.8-2.6 0.6-3.7-1.2-3.7-1.2-0.5-1.2-1.2-1.6-1.2-1.6-1-0.7 0-0.7 0-0.7 1.1 0 1.7 1.1 1.7 1.1 1 1.7 2.5 1.2 3.1 1 0.1-0.7 0.4-1.2 0.7-1.4-2.4-0.3-4.9-1.2-4.9-4.9 0-1.2 0.4-2.3 1-3.2-0.1-0.3-0.4-1.5 0.1-3.2 0 0 0.9-0.3 3 1.2 0.9-0.3 1.9-0.5 2.8-0.5 1 0 2 0.2 2.8 0.5 2.1-1.5 3-1.2 3-1.2 0.5 1.7 0.2 2.9 0.1 3.2 0.7 0.9 1 2 1 3.2 0 3.7-2.5 4.6-4.9 4.9 0.4 0.3 0.7 1 0.7 1.8 0 1.2 0 2.4 0 2.7 0 0.2 0.1 0.5 0.7 0.4C19.2 20.1 22 16.4 22 12 22 6.5 17.5 2 12 2z', 'w-5 h-5 mr-2 inline-block')} ACCESS GITHUB
                        </button>
                        <button onclick="window.open('${project.demo}', '_blank')" class="command-button px-6 py-2 flex items-center text-sm md:text-base">
                            ${getIconSVG('M5 3l14 9-14 9z', 'w-5 h-5 mr-2 inline-block')} RUN DEMO SIM
                        </button>
                    </div>
                </div>
            `;
            
            // Clear previous content and append new modal
            modalContainer.innerHTML = '';
            modalContainer.appendChild(modalContent);
            
            // Allow clicking outside to close
            modalContainer.onclick = (e) => {
                // Only close if the click target is the modal container itself
                if (e.target === modalContainer) {
                    closeProjectModal();
                }
            };
        }

        window.closeProjectModal = function() {
            const modalContainer = document.getElementById('modal-container');
            modalContainer.classList.remove('flex');
            modalContainer.classList.add('hidden');
            modalContainer.innerHTML = '';
        }
        
        // --- Form Submission Handler (Mock) ---
        window.handleFormSubmit = function(form) {
            const statusEl = document.getElementById('form-status');
            const data = {
                name: form.name.value,
                email: form.email.value,
                message: form.message.value
            };
            
            statusEl.textContent = 'Processing Transmission...';
            
            // Simulate network request
            setTimeout(() => {
                console.log('Form Submitted:', data);
                statusEl.textContent = 'Transmission Complete. Awaiting Reply.';
                form.reset();
            }, 2000);
        }

        // --- Mobile Menu Handlers ---
        window.toggleMobileMenu = function() {
            const nav = document.getElementById('mobile-nav');
            const icon = document.getElementById('menu-icon');
            const isHidden = nav.classList.contains('hidden');
            
            if (isHidden) {
                nav.classList.remove('hidden');
                nav.classList.add('flex');
                // X icon
                icon.innerHTML = '<path d="M18 6L6 18"/><path d="M6 6l12 12"/>'; 
            } else {
                nav.classList.add('hidden');
                nav.classList.remove('flex');
                // Hamburger icon
                icon.innerHTML = '<path d="M3 12h18M3 6h18M3 18h18"/>'; // Hamburger path
            }
        }
        
        window.closeMobileMenu = function() {
            const nav = document.getElementById('mobile-nav');
            const icon = document.getElementById('menu-icon');
            nav.classList.add('hidden');
            nav.classList.remove('flex');
            icon.innerHTML = '<path d="M3 12h18M3 6h18M3 18h18"/>'; // Hamburger path
        }
        
        window.navigateTo = navigateTo; // Make navigateTo globally accessible

        // --- Initialization ---

        function initNavigation() {
            const desktopLinksContainer = document.getElementById('desktop-nav-links');
            const mobileLinksContainer = document.getElementById('mobile-nav');
            
            Object.entries(NAV_MAP).forEach(([id, { title, icon }]) => {
                
                // Create the navigation link element
                const linkDiv = document.createElement('div');
                linkDiv.className = 'nav-link cursor-pointer flex items-center p-3 rounded-lg text-sm';
                linkDiv.setAttribute('data-page', id);
                linkDiv.innerHTML = `${getIconSVG(icon, 'w-5 h-5 mr-3')}${title}`;

                // ATTACH EVENT LISTENER (The fix: using addEventListener ensures reliable binding)
                linkDiv.addEventListener('click', () => navigateTo(id));

                // Clone for mobile and desktop to ensure separation
                const desktopLink = linkDiv.cloneNode(true);
                const mobileLink = linkDiv.cloneNode(true);
                
                // Re-attach listeners to the cloned nodes
                desktopLink.addEventListener('click', () => navigateTo(id));
                mobileLink.addEventListener('click', () => navigateTo(id));

                desktopLinksContainer.appendChild(desktopLink);
                mobileLinksContainer.appendChild(mobileLink);
            });
        }

        window.onload = function() {
            // Attach mobile menu handler
            document.getElementById('mobile-menu-btn').onclick = toggleMobileMenu;
            
            // Build the navigation structure
            initNavigation();

            // Load the initial content (Hero)
            updateContent();
        };

    </script>
</body>
</html>
